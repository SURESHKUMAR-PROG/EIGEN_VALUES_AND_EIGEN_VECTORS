<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eigenvalues & Eigenvectors Virtual Lab | VIRTUAL LABS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.9.0/math.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #1a237e;
            --secondary: #303f9f;
            --accent: #f50057;
            --light: #e8eaf6;
            --dark: #0d153a;
            --success: #00c853;
            --warning: #ffab00;
            --info: #00b0ff;
            --sidebar-width: 250px;
            --transition: all 0.3s ease;
            --glow: 0 0 20px rgba(0, 176, 255, 0.7);
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e3e8f8 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
        }

        /* Vertical Sidebar Menu */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(180deg, var(--primary) 0%, var(--dark) 100%);
            color: white;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            overflow-y: auto;
            transition: var(--transition);
        }

        .sidebar-header {
            padding: 25px 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            font-size: 2.5rem;
            color: #bbdefb;
            background: rgba(255, 255, 255, 0.1);
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(187, 222, 251, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(187, 222, 251, 0); }
            100% { box-shadow: 0 0 0 0 rgba(187, 222, 251, 0); }
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 5px;
        }

        .logo-subtitle {
            font-size: 0.9rem;
            opacity: 0.8;
            font-weight: 300;
        }

        .nav-menu {
            padding: 20px 0;
        }

        .nav-tab {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 16px 25px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            border-left: 4px solid transparent;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding-left: 30px;
            box-shadow: inset 0 0 15px rgba(255, 255, 255, 0.1);
        }

        .nav-tab.active {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border-left-color: var(--accent);
            box-shadow: inset 3px 0 10px rgba(245, 0, 87, 0.3);
        }

        .nav-tab i {
            width: 20px;
            text-align: center;
            font-size: 1.2rem;
        }

        .nav-tab::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.7s;
        }

        .nav-tab:hover::after {
            left: 100%;
        }

        /* Glowing Button Animation */
        @keyframes buttonGlow {
            0%, 100% { box-shadow: 0 5px 15px rgba(48, 63, 159, 0.3); }
            50% { box-shadow: 0 5px 20px rgba(48, 63, 159, 0.6), 0 0 15px rgba(48, 63, 159, 0.4); }
        }

        @keyframes successGlow {
            0%, 100% { box-shadow: 0 5px 15px rgba(0, 200, 83, 0.3); }
            50% { box-shadow: 0 5px 20px rgba(0, 200, 83, 0.6), 0 0 15px rgba(0, 200, 83, 0.4); }
        }

        @keyframes warningGlow {
            0%, 100% { box-shadow: 0 5px 15px rgba(255, 171, 0, 0.3); }
            50% { box-shadow: 0 5px 20px rgba(255, 171, 0, 0.6), 0 0 15px rgba(255, 171, 0, 0.4); }
        }

        @keyframes accentGlow {
            0%, 100% { box-shadow: 0 5px 15px rgba(245, 0, 87, 0.3); }
            50% { box-shadow: 0 5px 20px rgba(245, 0, 87, 0.6), 0 0 15px rgba(245, 0, 87, 0.4); }
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 20px;
            max-width: calc(100vw - var(--sidebar-width));
            transition: var(--transition);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Content Sections */
        .content-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            display: none;
            animation: fadeIn 0.8s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            color: var(--primary);
            border-bottom: 3px solid var(--secondary);
            padding-bottom: 15px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.8rem;
        }

        .section-title i {
            color: var(--accent);
            font-size: 1.8rem;
        }

        /* Aim Section */
        .aim-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid var(--info);
        }

        .aim-list {
            margin-top: 20px;
            padding-left: 20px;
        }

        .aim-list li {
            margin-bottom: 15px;
            position: relative;
            padding-left: 30px;
        }

        .aim-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--success);
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Theory Section */
        .theory-content {
            line-height: 1.8;
        }

        .theory-intro {
            font-size: 1.2rem;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(to right, #f8f9fa, #e9ecef);
            border-left: 5px solid var(--secondary);
            border-radius: 0 10px 10px 0;
        }

        .equation-box {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 25px 0;
            border-left: 5px solid var(--accent);
            font-size: 1.2rem;
            overflow-x: auto;
        }

        .equation {
            font-size: 1.3rem;
            text-align: center;
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }

        .property-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .property-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .property-card:hover {
            transform: translateY(-5px);
            border-color: var(--secondary);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        /* Test Sections */
        .test-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid var(--secondary);
        }

        .test-question {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #dee2e6;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: 600;
            color: var(--primary);
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 12px;
            margin-bottom: 15px;
        }

        .option {
            padding: 15px;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option:hover {
            border-color: var(--secondary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .option.selected {
            border-color: var(--secondary);
            background-color: #e8eaf6;
        }

        .option.correct {
            border-color: var(--success);
            background-color: #e8f5e9;
            animation: successGlow 1.5s infinite;
        }

        .option.incorrect {
            border-color: var(--accent);
            background-color: #ffebee;
        }

        .option input[type="radio"] {
            transform: scale(1.2);
        }

        .test-button {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin-right: 10px;
            transition: var(--transition);
            animation: buttonGlow 2s infinite;
        }

        .test-button:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .hint-box, .solution-box {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid var(--warning);
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .solution-box {
            border-left-color: var(--success);
        }

        .test-results {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
            border-radius: 10px;
            margin-top: 30px;
            animation: fadeIn 0.8s ease;
        }

        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Integrated Simulator & Visualization */
        .simulator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }

        @media (max-width: 1200px) {
            .simulator-container {
                grid-template-columns: 1fr;
            }
        }

        .matrix-controls {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .visualization-area {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
        }

        .dimension-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .dim-btn {
            padding: 12px 25px;
            background: white;
            border: 2px solid var(--secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            font-size: 1rem;
        }

        .dim-btn:hover {
            background: var(--secondary);
            color: white;
            transform: translateY(-3px);
            animation: buttonGlow 1.5s infinite;
        }

        .dim-btn.active {
            background: var(--secondary);
            color: white;
            box-shadow: 0 5px 15px rgba(48, 63, 159, 0.3);
            animation: buttonGlow 2s infinite;
        }

        .matrix-input {
            display: grid;
            gap: 12px;
            margin: 20px 0;
            justify-content: start;
        }

        .matrix-2x2 { grid-template-columns: repeat(2, 90px); }
        .matrix-3x3 { grid-template-columns: repeat(3, 90px); }

        .matrix-input input {
            width: 90px;
            height: 60px;
            text-align: center;
            font-size: 1.2rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            transition: var(--transition);
            font-weight: 600;
        }

        .matrix-input input:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(48, 63, 159, 0.2), 0 0 10px rgba(48, 63, 159, 0.3);
            transform: scale(1.05);
        }

        .control-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .calc-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            justify-content: center;
            min-width: 200px;
            animation: buttonGlow 2s infinite;
        }

        .calc-btn:hover {
            background: var(--primary);
            transform: translateY(-3px);
            animation: buttonGlow 1s infinite;
        }

        .calc-btn.example {
            background: var(--warning);
            animation: warningGlow 2s infinite;
        }

        .calc-btn.example:hover {
            background: #ff8f00;
            animation: warningGlow 1s infinite;
        }

        .calc-btn.reset {
            background: #757575;
        }

        .calc-btn.reset:hover {
            background: #616161;
        }

        .calc-btn.success {
            background: var(--success);
            animation: successGlow 2s infinite;
        }

        .calc-btn.accent {
            background: var(--accent);
            animation: accentGlow 2s infinite;
        }

        .plot-container {
            flex: 1;
            min-height: 450px;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 20px;
            border: 2px solid #e0e0e0;
        }

        /* Results Display */
        .results-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
            animation: fadeIn 0.8s ease;
        }

        .result-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-top: 5px solid var(--secondary);
            transition: var(--transition);
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .result-title {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .eigen-pair {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid var(--accent);
        }

        /* Examples Gallery */
        .examples-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .example-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 2px solid transparent;
            transition: var(--transition);
            cursor: pointer;
        }

        .example-card:hover {
            transform: translateY(-5px);
            border-color: var(--secondary);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            animation: buttonGlow 1.5s infinite;
        }

        .example-title {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .example-matrix {
            font-family: monospace;
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        /* Team Section */
        .team-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .team-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .team-card:hover {
            transform: translateY(-10px);
            border-color: var(--secondary);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .team-card.guide {
            background: linear-gradient(135deg, #e8eaf6, #f3e5f5);
            border-color: var(--secondary);
        }

        .team-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: white;
            font-size: 2rem;
            animation: pulse 3s infinite;
        }

        .team-name {
            color: var(--primary);
            font-size: 1.4rem;
            margin-bottom: 5px;
        }

        .team-role {
            color: var(--secondary);
            font-weight: 600;
            margin-bottom: 10px;
        }

        /* Feedback Form */
        .feedback-form {
            max-width: 600px;
            margin: 0 auto;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }
        .rating-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .rating-option {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }
        .rating-option input {
            width: auto;
            margin-right: 5px;
        }
        .submit-btn {
            background-color: #0076a8;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .submit-btn:hover {
            background-color: #005d85;
        }
        .form-message {
            padding: 10px;
            border-radius: 4px;
            margin-top: 20px;
            text-align: center;
            display: none;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .sidebar {
                width: 70px;
                overflow: hidden;
            }
            
            .sidebar:hover {
                width: var(--sidebar-width);
            }
            
            .sidebar-header {
                padding: 20px 10px;
            }
            
            .logo h1, .logo-subtitle {
                display: none;
            }
            
            .sidebar:hover .logo h1,
            .sidebar:hover .logo-subtitle {
                display: block;
            }
            
            .nav-tab span {
                display: none;
            }
            
            .sidebar:hover .nav-tab span {
                display: inline;
            }
            
            .main-content {
                margin-left: 70px;
                max-width: calc(100vw - 70px);
            }
            
            .sidebar:hover ~ .main-content {
                margin-left: var(--sidebar-width);
                max-width: calc(100vw - var(--sidebar-width));
            }
        }

        @media (max-width: 768px) {
            .simulator-container {
                grid-template-columns: 1fr;
            }
            
            .control-buttons {
                flex-direction: column;
            }
            
            .calc-btn {
                min-width: 100%;
            }
            
            .results-container {
                grid-template-columns: 1fr;
            }
            
            .team-container {
                grid-template-columns: 1fr;
            }
            
            .property-grid {
                grid-template-columns: 1fr;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        /* Footer */
        footer {
            background: var(--primary);
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 50px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <!-- Vertical Sidebar Menu -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-calculator"></i>
                </div>
                <h1>Eigen Lab</h1>
                <div class="logo-subtitle">VIRTUAL LABS</div>
            </div>
        </div>
        
        <div class="nav-menu">
            <div class="nav-tab active" data-target="aim">
                <i class="fas fa-bullseye"></i>
                <span>Aim & Objectives</span>
            </div>
            <div class="nav-tab" data-target="pretest">
                <i class="fas fa-clipboard-check"></i>
                <span>Pre-Test</span>
            </div>
            <div class="nav-tab" data-target="theory">
                <i class="fas fa-book-open"></i>
                <span>Theory</span>
            </div>
            <div class="nav-tab" data-target="procedure">
                <i class="fas fa-list-ol"></i>
                <span>Procedure</span>
            </div>
            <div class="nav-tab" data-target="simulator">
                <i class="fas fa-sliders-h"></i>
                <span>Simulator</span>
            </div>
            <div class="nav-tab" data-target="visualization">
                <i class="fas fa-chart-line"></i>
                <span>Visualization</span>
            </div>
            <div class="nav-tab" data-target="posttest">
                <i class="fas fa-graduation-cap"></i>
                <span>Post-Test</span>
            </div>
            <div class="nav-tab" data-target="examples">
                <i class="fas fa-lightbulb"></i>
                <span>Examples</span>
            </div>
            <div class="nav-tab" data-target="quiz">
                <i class="fas fa-question-circle"></i>
                <span>Practice Quiz</span>
            </div>
            <div class="nav-tab" data-target="applications">
                <i class="fas fa-rocket"></i>
                <span>Applications</span>
            </div>
            <div class="nav-tab" data-target="feedback">
                <i class="fas fa-comment-dots"></i>
                <span>Feedback</span>
            </div>
            <div class="nav-tab" data-target="about">
                <i class="fas fa-users"></i>
                <span>About Us</span>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content">
        <div class="container">
            <!-- Aim Section -->
            <section id="aim" class="content-section active">
                <h2 class="section-title">
                    <i class="fas fa-bullseye"></i> Aim & Learning Objectives
                </h2>
                
                <div class="aim-box">
                    <h3>Primary Aim</h3>
                    <p>The primary aim of this virtual lab is to compute and visualize the eigen-structure (eigenvalues and eigenvectors) of square matrices, and to verify fundamental algebraic properties through interactive experimentation.</p>
                    
                    <h3 style="margin-top: 25px;">Learning Objectives</h3>
                    <ul class="aim-list">
                        <li>Understand the geometric meaning of eigen-transformations and their significance in linear algebra</li>
                        <li>Master the derivation of the characteristic equation from the eigenvalue problem</li>
                        <li>Learn numerical methods to find basis vectors for eigenspaces</li>
                        <li>Verify fundamental properties relating trace and determinant to eigenvalues</li>
                        <li>Visualize eigenvectors in 2D and 3D space and understand their transformation behavior</li>
                        <li>Apply eigenvalue concepts to real-world problems in data science, engineering, and physics</li>
                        <li>Develop intuition for special cases: symmetric matrices, defective matrices, and complex eigenvalues</li>
                    </ul>
                </div>
                
                <div class="property-card" style="margin-top: 30px;">
                    <h3 class="result-title"><i class="fas fa-info-circle"></i> Virtual Lab Features</h3>
                    <ul style="padding-left: 20px; margin-top: 15px;">
                        <li>Interactive matrix simulator with real-time eigenvalue calculation</li>
                        <li>2D and 3D visualization of eigenvectors and transformations</li>
                        <li>Comprehensive theory with mathematical derivations</li>
                        <li>Pre-test and post-test assessments with detailed solutions</li>
                        <li>Example gallery with diverse matrix types</li>
                        <li>Practice quiz with instant feedback</li>
                        <li>Real-world applications and case studies</li>
                    </ul>
                </div>
            </section>

            <!-- Pre-Test Section -->
            <section id="pretest" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-clipboard-check"></i> Pre-Test: Prerequisite Knowledge Assessment
                </h2>
                <p>This pre-test assesses your basic knowledge of linear algebra concepts required to understand eigenvalues and eigenvectors. Complete all 5 questions to evaluate your readiness.</p>
                
                <div class="test-container">
                    <!-- Questions loaded dynamically -->
                </div>
                
                <div class="test-results" id="pretest-results" style="display: none;">
                    <h3>Pre-Test Results</h3>
                    <div class="score-display" id="pretest-score">0/5</div>
                    <p id="pretest-feedback">Complete the test to see your results</p>
                    <div style="margin-top: 20px;">
                        <button class="test-button" id="retry-pretest">
                            <i class="fas fa-redo"></i> Retry Pre-Test
                        </button>
                        <button class="test-button success" id="proceed-theory">
                            <i class="fas fa-arrow-right"></i> Proceed to Theory
                        </button>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="calc-btn" id="submit-pretest">
                        <i class="fas fa-check-circle"></i> Submit Pre-Test
                    </button>
                </div>
            </section>

            <!-- Theory Section -->
            <section id="theory" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-book-open"></i> Theoretical Foundations
                </h2>
                
                <div class="theory-content">
                    <div class="theory-intro">
                        <p>Eigenvalues and eigenvectors are fundamental concepts in linear algebra that reveal the intrinsic structure of linear transformations. They provide deep insight into the behavior of matrices and have applications across science, engineering, and data analysis.</p>
                    </div>
                    
                    <h3>Core Definition</h3>
                    <p>For a square matrix <strong>A</strong> of dimension <strong>n × n</strong>, an <strong>eigenvector</strong> <strong>v</strong> is a non-zero vector that, when multiplied by <strong>A</strong>, changes only by a scalar factor λ (the <strong>eigenvalue</strong>).</p>
                    
                    <div class="equation-box">
                        <div class="equation">A · v = λ · v</div>
                        <p>This equation represents a fundamental relationship where the matrix transformation <strong>A</strong> acts on vector <strong>v</strong> by simply scaling it, without changing its direction in the vector space.</p>
                    </div>
                    
                    <h3>Derivation of Characteristic Equation</h3>
                    <p>Rearranging the eigen equation:</p>
                    <div class="equation">A · v - λ · v = 0 ⇒ (A - λI) · v = 0</div>
                    <p>where <strong>I</strong> is the <strong>n × n</strong> identity matrix. For non-trivial solutions (v ≠ 0), the matrix (A - λI) must be singular:</p>
                    <div class="equation">det(A - λI) = 0</div>
                    <p>This determinant equation is called the <strong>characteristic equation</strong> of matrix <strong>A</strong>. When expanded, it yields an <strong>n</strong>-th degree polynomial in λ:</p>
                    <div class="equation">λⁿ + cₙ₋₁λⁿ⁻¹ + ... + c₁λ + c₀ = 0</div>
                    
                    <h3>Key Properties & Theorems</h3>
                    <div class="property-grid">
                        <div class="property-card">
                            <h4 class="result-title"><i class="fas fa-plus-circle"></i> Trace Property</h4>
                            <p>The sum of all eigenvalues equals the trace of the matrix:</p>
                            <div class="equation">∑ λᵢ = tr(A) = ∑ aᵢᵢ</div>
                        </div>
                        
                        <div class="property-card">
                            <h4 class="result-title"><i class="fas fa-times-circle"></i> Determinant Property</h4>
                            <p>The product of all eigenvalues equals the determinant:</p>
                            <div class="equation">∏ λᵢ = det(A)</div>
                        </div>
                        
                        <div class="property-card">
                            <h4 class="result-title"><i class="fas fa-project-diagram"></i> Spectral Theorem</h4>
                            <p>A symmetric matrix has real eigenvalues and orthogonal eigenvectors that form a basis for ℝⁿ.</p>
                        </div>
                        
                        <div class="property-card">
                            <h4 class="result-title"><i class="fas fa-braille"></i> Diagonalization</h4>
                            <p>If A has n linearly independent eigenvectors, it can be diagonalized: A = PDP⁻¹ where D contains eigenvalues.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Procedure Section -->
            <section id="procedure" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-list-ol"></i> Step-by-Step Procedure
                </h2>
                
                <div class="step-container">
                    <!-- Steps loaded dynamically -->
                </div>
                
                <div class="equation-box" style="margin-top: 40px;">
                    <h4>Detailed Example</h4>
                    <p><strong>Given matrix:</strong> A = [[4, 1], [2, 3]]</p>
                    <p><strong>Step 1:</strong> Characteristic matrix: [[4-λ, 1], [2, 3-λ]]</p>
                    <p><strong>Step 2:</strong> Characteristic polynomial: det([[4-λ, 1], [2, 3-λ]]) = (4-λ)(3-λ) - 2 = λ² - 7λ + 10</p>
                    <p><strong>Step 3:</strong> Solve λ² - 7λ + 10 = 0 ⇒ (λ-5)(λ-2) = 0 ⇒ λ₁ = 5, λ₂ = 2</p>
                    <p><strong>Step 4:</strong> For λ₁ = 5: Solve (A-5I)v = [[-1, 1], [2, -2]]v = 0 ⇒ v₁ = [1, 1]ᵀ</p>
                    <p>For λ₂ = 2: Solve (A-2I)v = [[2, 1], [2, 1]]v = 0 ⇒ v₂ = [1, -2]ᵀ</p>
                    <p><strong>Step 5:</strong> Verification: tr(A) = 4+3 = 7 = 5+2 ✓; det(A) = 4×3 - 1×2 = 10 = 5×2 ✓</p>
                </div>
            </section>

            <!-- Integrated Simulator & Visualization Section -->
            <section id="simulator" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-sliders-h"></i> Interactive Simulator & Visualization
                </h2>
                
                <div class="simulator-container">
                    <div class="matrix-controls">
                        <h3>Matrix Input & Controls</h3>
                        
                        <div class="dimension-selector">
                            <span style="font-weight: 600; color: var(--primary);">Select Dimension:</span>
                            <button class="dim-btn active" data-dim="2">2×2 Matrix</button>
                            <button class="dim-btn" data-dim="3">3×3 Matrix</button>
                        </div>
                        
                        <div id="matrixInputContainer">
                            <!-- Matrix inputs loaded dynamically -->
                        </div>
                        
                        <div class="control-buttons">
                            <button class="calc-btn" id="calculateBtn">
                                <i class="fas fa-calculator"></i> Calculate Eigenvalues
                            </button>
                            <button class="calc-btn example" id="exampleBtn">
                                <i class="fas fa-random"></i> Load Random Example
                            </button>
                            <button class="calc-btn reset" id="resetBtn">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                        
                        <div class="examples-gallery" style="margin-top: 25px;">
                            <h4>Quick Examples:</h4>
                            <!-- Examples loaded dynamically -->
                        </div>
                    </div>
                    
                    <div class="visualization-area">
                        <h3>Eigenvector Visualization</h3>
                        <div class="plot-container" id="plotArea">
                            <!-- Visualization will be rendered here -->
                        </div>
                        <div class="control-buttons" style="margin-top: 20px;">
                            <button class="calc-btn" id="animateBtn">
                                <i class="fas fa-play"></i> Animate Transformation
                            </button>
                            <button class="calc-btn" id="exportBtn">
                                <i class="fas fa-download"></i> Export Visualization
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="results-container" id="resultsContainer" style="display: none;">
                    <!-- Results will be displayed here -->
                </div>
            </section>

            <!-- Visualization Section -->
            <section id="visualization" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-chart-line"></i> Advanced Visualization
                </h2>
                
                <div class="plot-container" id="advancedPlot" style="height: 600px;">
                    <!-- Advanced plots will be rendered here -->
                </div>
                
                <div class="control-buttons" style="margin-top: 30px; justify-content: center;">
                    <button class="calc-btn" id="plot2DBtn">
                        <i class="fas fa-square"></i> 2D Visualization
                    </button>
                    <button class="calc-btn" id="plot3DBtn">
                        <i class="fas fa-cube"></i> 3D Visualization
                    </button>
                    <button class="calc-btn example" id="plotComplexBtn">
                        <i class="fas fa-infinity"></i> Complex Eigenvalues
                    </button>
                </div>
            </section>

            <!-- Post-Test Section -->
            <section id="posttest" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-graduation-cap"></i> Post-Test: Knowledge Assessment
                </h2>
                <p>Test your understanding of eigenvalues and eigenvectors after studying the material. Complete all 10 questions to assess your learning.</p>
                
                <div class="test-container">
                    <!-- Post-test questions loaded dynamically -->
                </div>
                
                <div class="test-results" id="posttest-results" style="display: none;">
                    <h3>Post-Test Results</h3>
                    <div class="score-display" id="posttest-score">0/10</div>
                    <p id="posttest-feedback">Complete the test to see your results</p>
                    <div style="margin-top: 20px;">
                        <button class="test-button" id="retry-posttest">
                            <i class="fas fa-redo"></i> Retry Post-Test
                        </button>
                        <button class="test-button success" id="proceed-examples">
                            <i class="fas fa-arrow-right"></i> Proceed to Examples
                        </button>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="calc-btn" id="submit-posttest">
                        <i class="fas fa-check-circle"></i> Submit Post-Test
                    </button>
                </div>
            </section>

            <!-- Examples Section -->
            <section id="examples" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-lightbulb"></i> Example Gallery
                </h2>
                <p>Explore different types of matrices and their eigen-structures. Click on any example to load it into the simulator.</p>
                
                <div class="examples-gallery">
                    <!-- Examples loaded dynamically -->
                </div>
                
                <div class="control-buttons" style="margin-top: 30px; justify-content: center;">
                    <button class="calc-btn example" id="loadMoreExamples">
                        <i class="fas fa-plus-circle"></i> Load More Examples
                    </button>
                </div>
            </section>

            <!-- Practice Quiz Section -->
            <section id="quiz" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-question-circle"></i> Practice Quiz
                </h2>
                
                <div class="test-container">
                    <!-- Quiz questions loaded dynamically -->
                </div>
                
                <div class="test-results" id="quiz-results" style="display: none;">
                    <h3>Quiz Results</h3>
                    <div class="score-display" id="quiz-score">0/10</div>
                    <p id="quiz-feedback">Complete the quiz to see your results</p>
                    <button class="test-button" id="retry-quiz" style="margin-top: 20px;">
                        <i class="fas fa-redo"></i> Retry Quiz
                    </button>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="calc-btn" id="submit-quiz">
                        <i class="fas fa-check-circle"></i> Submit Quiz
                    </button>
                </div>
            </section>

            <!-- Applications Section -->
            <section id="applications" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-rocket"></i> Real-World Applications
                </h2>
                
                <div class="property-grid">
                    <div class="property-card">
                        <h4 class="result-title"><i class="fas fa-chart-bar"></i> Principal Component Analysis (PCA)</h4>
                        <p>PCA uses eigenvectors of a covariance matrix to identify patterns in high-dimensional data and reduce dimensionality while preserving important information.</p>
                    </div>
                    
                    <div class="property-card">
                        <h4 class="result-title"><i class="fas fa-search"></i> Google PageRank</h4>
                        <p>The importance of webpages is calculated as the dominant eigenvector of the web link matrix, ranking pages by their relative importance.</p>
                    </div>
                    
                    <div class="property-card">
                        <h4 class="result-title"><i class="fas fa-bridge"></i> Structural Engineering</h4>
                        <p>Bridges and skyscrapers have "natural frequencies" (eigenvalues) of vibration. Engineers ensure external forces don't match these values to prevent resonance collapse.</p>
                    </div>
                    
                    <div class="property-card">
                        <h4 class="result-title"><i class="fas fa-robot"></i> Machine Learning</h4>
                        <p>Eigenvectors are used in facial recognition (Eigenfaces), recommender systems, and clustering algorithms for pattern recognition.</p>
                    </div>
                    
                    <div class="property-card">
                        <h4 class="result-title"><i class="fas fa-atom"></i> Quantum Mechanics</h4>
                        <p>In quantum mechanics, observables are represented by Hermitian operators whose eigenvalues represent possible measurement outcomes.</p>
                    </div>
                    
                    <div class="property-card">
                        <h4 class="result-title"><i class="fas fa-network-wired"></i> Network Analysis</h4>
                        <p>Eigenvalues of adjacency matrices reveal important properties of networks like connectivity, centrality, and community structure.</p>
                    </div>
                </div>
            </section>

            <!-- Feedback Section -->
            <section id="feedback" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-comment-dots"></i> User Feedback
                </h2>
                
                <p>We value your feedback! Please share your experience with this virtual lab and any suggestions for improvement.</p>
                
        <form
            action="https://formspree.io/f/mnjqnvwe"
            method="POST"
            >
            <label>
                Your email:
                <input type="email" name="email">
                </label>
                <label>
                    Your message:
                    <textarea name="message"></textarea>
                    </label>
                    <!-- your other form fields go here -->
                    <button type="submit">Send</button>
                    </form>
                
                <div id="feedbackMessage" style="margin-top: 20px; text-align: center;"></div>
            </section>

            <!-- About Us Section -->
            <section id="about" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-users"></i> About Our Team
                </h2>
                
                <p>This Virtual Lab on Eigenvalues and Eigenvectors was developed by a dedicated team of students and faculty as part of the <strong>VIRTUAL LABS</strong> initiative. Our goal is to create interactive, engaging educational tools that make complex mathematical concepts accessible and intuitive.</p>
                
                <div class="team-container">
                    <!-- Team cards loaded dynamically -->
                </div>
            </section>
        </div>
        
        <footer>
            <p>Eigenvalues & Eigenvectors Virtual Lab | VIRTUAL LABS Initiative</p>
            <p>© 2025 | Interactive Mathematics Education Tool | All Rights Reserved</p>
        </footer>
    </main>

    <script>
        // Main JavaScript Application
        document.addEventListener('DOMContentLoaded', function() {
            // ========== GLOBAL VARIABLES ==========
            let currentMatrix = [[4, 1], [2, 3]];
            let currentEigenvalues = [];
            let currentEigenvectors = [];
            let preTestScore = 0;
            let postTestScore = 0;
            let quizScore = 0;
            
            // ========== NAVIGATION SYSTEM ==========
            const navTabs = document.querySelectorAll('.nav-tab');
            const contentSections = document.querySelectorAll('.content-section');
            
            navTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Update active tab
                    navTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding section
                    const targetId = this.getAttribute('data-target');
                    contentSections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetId) {
                            section.classList.add('active');
                            // Initialize section content
                            initializeSection(targetId);
                        }
                    });
                });
            });
            
            // ========== SECTION INITIALIZATION ==========
            function initializeSection(sectionId) {
                switch(sectionId) {
                    case 'aim':
                        // Already loaded in HTML
                        break;
                    case 'pretest':
                        loadPreTest();
                        break;
                    case 'theory':
                        // Already loaded in HTML
                        break;
                    case 'procedure':
                        loadProcedure();
                        break;
                    case 'simulator':
                        initializeSimulator();
                        break;
                    case 'visualization':
                        initializeAdvancedVisualization();
                        break;
                    case 'posttest':
                        loadPostTest();
                        break;
                    case 'examples':
                        loadExamples();
                        break;
                    case 'quiz':
                        loadQuiz();
                        break;
                    case 'applications':
                        // Already loaded in HTML
                        break;
                    case 'feedback':
                        initializeFeedback();
                        break;
                    case 'about':
                        loadTeam();
                        break;
                }
            }
            
            // ========== PRE-TEST SYSTEM ==========
            function loadPreTest() {
                const testContainer = document.querySelector('#pretest .test-container');
                
                const preTestQuestions = [
                    {
                        id: 1,
                        question: "What is the determinant of the matrix A = [[2, 3], [1, 4]]?",
                        options: ["5", "8", "11", "14"],
                        correct: 0,
                        hint: "The determinant of a 2×2 matrix [[a,b],[c,d]] is calculated as (a*d) - (b*c).",
                        solution: "For matrix [[2,3],[1,4]], determinant = (2×4) - (3×1) = 8 - 3 = 5."
                    },
                    {
                        id: 2,
                        question: "What is the trace (sum of diagonal elements) of matrix B = [[1, 2, 3], [0, 4, 5], [0, 0, 6]]?",
                        options: ["6", "11", "15", "21"],
                        correct: 1,
                        hint: "Trace is the sum of the main diagonal elements: a₁₁ + a₂₂ + a₃₃ + ...",
                        solution: "Diagonal elements are 1, 4, 6. Their sum = 1 + 4 + 6 = 11."
                    },
                    {
                        id: 3,
                        question: "Which of the following is an eigenvector of matrix C = [[2, 0], [0, 3]]?",
                        options: ["[1, 0]", "[1, 1]", "[0, 1]", "[1, 2]"],
                        correct: [0, 2], // Multiple correct answers
                        hint: "For a diagonal matrix, the standard basis vectors are eigenvectors. Check if C·v = λ·v for some scalar λ.",
                        solution: "For v = [1,0]: C·v = [2,0] = 2·[1,0] (eigenvalue 2). For v = [0,1]: C·v = [0,3] = 3·[0,1] (eigenvalue 3)."
                    },
                    {
                        id: 4,
                        question: "Solve the quadratic equation: λ² - 5λ + 6 = 0",
                        options: ["λ = 1, 6", "λ = -2, -3", "λ = 2, 3", "λ = -1, 6"],
                        correct: 2,
                        hint: "Factor the quadratic: (λ - a)(λ - b) = λ² - (a+b)λ + ab. Find a and b such that a+b=5 and ab=6.",
                        solution: "λ² - 5λ + 6 = (λ - 2)(λ - 3) = 0, so λ = 2 or λ = 3."
                    },
                    {
                        id: 5,
                        question: "Which property is true for a singular matrix?",
                        options: ["Its determinant is 1", "Its determinant is 0", "It has an inverse", "All its eigenvalues are positive"],
                        correct: 1,
                        hint: "A singular matrix is not invertible. What condition makes a matrix non-invertible?",
                        solution: "A matrix is singular if its determinant is 0, which means it doesn't have an inverse."
                    }
                ];
                
                let testHTML = '';
                preTestQuestions.forEach(q => {
                    testHTML += `
                        <div class="test-question" id="q${q.id}">
                            <div class="question-text">${q.id}. ${q.question}</div>
                            <div class="options-container" id="options-${q.id}">
                    `;
                    
                    q.options.forEach((option, idx) => {
                        testHTML += `
                            <div class="option" data-question="${q.id}" data-option="${idx}">
                                <input type="${Array.isArray(q.correct) ? 'checkbox' : 'radio'}" name="q${q.id}" id="q${q.id}opt${idx}">
                                <label for="q${q.id}opt${idx}">${option}</label>
                            </div>
                        `;
                    });
                    
                    testHTML += `
                            </div>
                            <button class="test-button hint-button" data-question="${q.id}">
                                <i class="fas fa-lightbulb"></i> Show Hint
                            </button>
                            <button class="test-button solution-button" data-question="${q.id}">
                                <i class="fas fa-check-circle"></i> Show Solution
                            </button>
                            <div class="hint-box" id="hint-${q.id}">
                                <strong>Hint:</strong> ${q.hint}
                            </div>
                            <div class="solution-box" id="solution-${q.id}">
                                <strong>Solution:</strong> ${q.solution}
                            </div>
                        </div>
                    `;
                });
                
                testContainer.innerHTML = testHTML;
                
                // Add event listeners to options
                document.querySelectorAll('#pretest .option').forEach(option => {
                    option.addEventListener('click', function() {
                        const questionId = this.getAttribute('data-question');
                        const optionIndex = parseInt(this.getAttribute('data-option'));
                        const question = preTestQuestions.find(q => q.id == questionId);
                        
                        if (Array.isArray(question.correct)) {
                            // For multiple correct answers (checkbox)
                            this.classList.toggle('selected');
                            const checkbox = this.querySelector('input[type="checkbox"]');
                            checkbox.checked = !checkbox.checked;
                        } else {
                            // For single correct answer (radio)
                            const options = document.querySelectorAll(`#options-${questionId} .option`);
                            options.forEach(opt => {
                                opt.classList.remove('selected');
                                opt.querySelector('input[type="radio"]').checked = false;
                            });
                            this.classList.add('selected');
                            this.querySelector('input[type="radio"]').checked = true;
                        }
                    });
                });
                
                // Add event listeners to hint and solution buttons
                document.querySelectorAll('#pretest .hint-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const questionId = this.getAttribute('data-question');
                        const hintBox = document.getElementById(`hint-${questionId}`);
                        hintBox.style.display = hintBox.style.display === 'block' ? 'none' : 'block';
                    });
                });
                
                document.querySelectorAll('#pretest .solution-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const questionId = this.getAttribute('data-question');
                        const solutionBox = document.getElementById(`solution-${questionId}`);
                        solutionBox.style.display = solutionBox.style.display === 'block' ? 'none' : 'block';
                    });
                });
                
                // Submit pre-test button
                document.getElementById('submit-pretest').addEventListener('click', submitPreTest);
                
                // Retry pre-test button
                document.getElementById('retry-pretest')?.addEventListener('click', function() {
                    loadPreTest();
                    document.getElementById('pretest-results').style.display = 'none';
                    document.getElementById('submit-pretest').style.display = 'block';
                });
                
                // Proceed to theory button
                document.getElementById('proceed-theory')?.addEventListener('click', function() {
                    document.querySelector('.nav-tab[data-target="theory"]').click();
                });
            }
            
            function submitPreTest() {
                let score = 0;
                const questions = [
                    {id: 1, correct: [0]},
                    {id: 2, correct: [1]},
                    {id: 3, correct: [0, 2]},
                    {id: 4, correct: [2]},
                    {id: 5, correct: [1]}
                ];
                
                questions.forEach(q => {
                    const selectedOptions = [];
                    document.querySelectorAll(`#options-${q.id} .option.selected`).forEach(opt => {
                        selectedOptions.push(parseInt(opt.getAttribute('data-option')));
                    });
                    
                    // Check if selected options match correct answers
                    const isCorrect = JSON.stringify(selectedOptions.sort()) === JSON.stringify(q.correct.sort());
                    
                    // Highlight correct/incorrect answers
                    document.querySelectorAll(`#options-${q.id} .option`).forEach(opt => {
                        const optIndex = parseInt(opt.getAttribute('data-option'));
                        if (q.correct.includes(optIndex)) {
                            opt.classList.add('correct');
                        } else if (opt.classList.contains('selected') && !q.correct.includes(optIndex)) {
                            opt.classList.add('incorrect');
                        }
                    });
                    
                    if (isCorrect) score++;
                });
                
                preTestScore = score;
                
                // Display results
                const resultsDiv = document.getElementById('pretest-results');
                const scoreDiv = document.getElementById('pretest-score');
                const feedbackDiv = document.getElementById('pretest-feedback');
                
                scoreDiv.textContent = `${score}/5`;
                
                if (score === 5) {
                    feedbackDiv.textContent = "Excellent! You have strong prerequisite knowledge. You're ready to proceed.";
                    feedbackDiv.style.color = "var(--success)";
                } else if (score >= 3) {
                    feedbackDiv.textContent = "Good! You have adequate prerequisite knowledge. Review the theory section carefully.";
                    feedbackDiv.style.color = "var(--warning)";
                } else {
                    feedbackDiv.textContent = "You may need to review basic linear algebra concepts before proceeding.";
                    feedbackDiv.style.color = "var(--accent)";
                }
                
                resultsDiv.style.display = 'block';
                document.getElementById('submit-pretest').style.display = 'none';
            }
            
            // ========== PROCEDURE SECTION ==========
            function loadProcedure() {
                const stepContainer = document.querySelector('#procedure .step-container');
                
                const steps = [
                    {
                        title: "Construct the Characteristic Matrix",
                        description: "Begin with a square matrix A of size n × n. Form the matrix (A - λI) by subtracting λ from each diagonal element of A, where I is the identity matrix of the same dimension.",
                        equation: "Characteristic Matrix = A - λI"
                    },
                    {
                        title: "Compute the Characteristic Polynomial",
                        description: "Calculate the determinant of the characteristic matrix to obtain the characteristic polynomial, which is an n-th degree polynomial in λ.",
                        equation: "p(λ) = det(A - λI)"
                    },
                    {
                        title: "Solve for Eigenvalues",
                        description: "Find the roots of the characteristic polynomial p(λ) = 0. These roots λ₁, λ₂, ..., λₙ are the eigenvalues of matrix A.",
                        equation: "p(λ) = 0 ⇒ λ₁, λ₂, ..., λₙ"
                    },
                    {
                        title: "Determine Eigenvectors",
                        description: "For each eigenvalue λᵢ, solve the homogeneous linear system (A - λᵢI)v = 0. Use Gaussian elimination to find the null space.",
                        equation: "(A - λᵢI)v = 0"
                    },
                    {
                        title: "Verification & Analysis",
                        description: "Verify your results by checking: (1) Sum of eigenvalues equals trace of A, (2) Product equals determinant, (3) Direct multiplication A·vᵢ = λᵢ·vᵢ.",
                        equation: "∑λᵢ = tr(A), ∏λᵢ = det(A)"
                    }
                ];
                
                let stepsHTML = '';
                steps.forEach((step, index) => {
                    stepsHTML += `
                        <div class="step" style="margin-bottom: 30px; padding-left: 70px; position: relative;">
                            <div style="position: absolute; left: 0; top: 0; width: 50px; height: 50px; background: var(--secondary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; box-shadow: 0 5px 15px rgba(48, 63, 159, 0.3);">
                                ${index + 1}
                            </div>
                            <h3 class="step-title" style="color: var(--primary); margin-bottom: 10px; font-size: 1.3rem;">${step.title}</h3>
                            <p>${step.description}</p>
                            <div class="equation" style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 8px; text-align: center; font-size: 1.2rem;">
                                ${step.equation}
                            </div>
                        </div>
                    `;
                });
                
                stepContainer.innerHTML = stepsHTML;
            }
            
            // ========== SIMULATOR SYSTEM ==========
            function initializeSimulator() {
                // Create matrix inputs
                createMatrixInputs();
                
                // Set up event listeners
                document.querySelectorAll('.dim-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.querySelectorAll('.dim-btn').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        createMatrixInputs(this.getAttribute('data-dim'));
                    });
                });
                
                // Calculate button
                document.getElementById('calculateBtn').addEventListener('click', calculateEigenvalues);
                
                // Example button
                document.getElementById('exampleBtn').addEventListener('click', loadRandomExample);
                
                // Reset button
                document.getElementById('resetBtn').addEventListener('click', resetSimulator);
                
                // Animate button
                document.getElementById('animateBtn').addEventListener('click', animateTransformation);
                
                // Export button
                document.getElementById('exportBtn').addEventListener('click', exportVisualization);
                
                // Load quick examples
                loadQuickExamples();
                
                // Initial calculation
                calculateEigenvalues();
            }
            
            function createMatrixInputs(dim = '2') {
                const container = document.getElementById('matrixInputContainer');
                
                if (dim === '2') {
                    container.innerHTML = `
                        <div class="matrix-input matrix-2x2" id="matrix2x2">
                            <input type="number" id="a11" value="4" placeholder="a₁₁">
                            <input type="number" id="a12" value="1" placeholder="a₁₂">
                            <input type="number" id="a21" value="2" placeholder="a₂₁">
                            <input type="number" id="a22" value="3" placeholder="a₂₂">
                        </div>
                    `;
                } else {
                    container.innerHTML = `
                        <div class="matrix-input matrix-3x3" id="matrix3x3">
                            <input type="number" id="b11" value="2" placeholder="b₁₁">
                            <input type="number" id="b12" value="0" placeholder="b₁₂">
                            <input type="number" id="b13" value="0" placeholder="b₁₃">
                            <input type="number" id="b21" value="0" placeholder="b₂₁">
                            <input type="number" id="b22" value="3" placeholder="b₂₂">
                            <input type="number" id="b23" value="1" placeholder="b₂₃">
                            <input type="number" id="b31" value="0" placeholder="b₃₁">
                            <input type="number" id="b32" value="0" placeholder="b₃₂">
                            <input type="number" id="b33" value="3" placeholder="b₃₃">
                        </div>
                    `;
                }
                
                // Add animation to inputs on focus
                container.querySelectorAll('input').forEach(input => {
                    input.addEventListener('focus', function() {
                        this.style.transform = 'scale(1.05)';
                        this.style.boxShadow = '0 0 15px rgba(48, 63, 159, 0.3)';
                    });
                    
                    input.addEventListener('blur', function() {
                        this.style.transform = 'scale(1)';
                        this.style.boxShadow = 'none';
                    });
                });
            }
            
            function calculateEigenvalues() {
                const is2x2 = document.querySelector('#matrix2x2') !== null;
                let matrix;
                
                if (is2x2) {
                    matrix = [
                        [parseFloat(document.getElementById('a11').value) || 0,
                         parseFloat(document.getElementById('a12').value) || 0],
                        [parseFloat(document.getElementById('a21').value) || 0,
                         parseFloat(document.getElementById('a22').value) || 0]
                    ];
                } else {
                    matrix = [
                        [parseFloat(document.getElementById('b11').value) || 0,
                         parseFloat(document.getElementById('b12').value) || 0,
                         parseFloat(document.getElementById('b13').value) || 0],
                        [parseFloat(document.getElementById('b21').value) || 0,
                         parseFloat(document.getElementById('b22').value) || 0,
                         parseFloat(document.getElementById('b23').value) || 0],
                        [parseFloat(document.getElementById('b31').value) || 0,
                         parseFloat(document.getElementById('b32').value) || 0,
                         parseFloat(document.getElementById('b33').value) || 0]
                    ];
                }
                
                currentMatrix = matrix;
                
                try {
                    const mathMatrix = math.matrix(matrix);
                    const eig = math.eigs(mathMatrix);
                    const eigenvalues = eig.values;
                    const eigenvectors = eig.vectors;
                    
                    currentEigenvalues = eigenvalues;
                    currentEigenvectors = eigenvectors;
                    
                    displayResults(matrix, eigenvalues, eigenvectors);
                    updateVisualization(matrix, eigenvalues, eigenvectors);
                    
                    // Add success animation to calculate button
                    const calcBtn = document.getElementById('calculateBtn');
                    calcBtn.innerHTML = '<i class="fas fa-check"></i> Calculated Successfully!';
                    calcBtn.style.background = 'var(--success)';
                    setTimeout(() => {
                        calcBtn.innerHTML = '<i class="fas fa-calculator"></i> Calculate Eigenvalues';
                        calcBtn.style.background = 'var(--secondary)';
                    }, 2000);
                    
                } catch (error) {
                    alert(`Error calculating eigenvalues: ${error.message}`);
                    console.error(error);
                }
            }
            
            function displayResults(matrix, eigenvalues, eigenvectors) {
                const resultsContainer = document.getElementById('resultsContainer');
                const is2x2 = matrix.length === 2;
                
                // Calculate matrix properties
                const trace = math.trace(matrix);
                const det = math.det(matrix);
                
                // Format eigenvalues
                let eigVals = [];
                if (Array.isArray(eigenvalues)) {
                    eigVals = eigenvalues;
                } else if (typeof eigenvalues === 'object') {
                    eigVals = [eigenvalues];
                }
                
                let resultsHTML = `
                    <div class="result-card">
                        <h3 class="result-title"><i class="fas fa-th"></i> Matrix Properties</h3>
                        <p><strong>Matrix A:</strong></p>
                        <div style="background: #f5f5f5; padding: 10px; border-radius: 5px; margin: 10px 0; font-family: monospace;">
                            ${matrix.map(row => `[${row.map(val => val.toFixed(3)).join(', ')}]`).join('<br>')}
                        </div>
                        <p><strong>Trace:</strong> ${trace.toFixed(4)}</p>
                        <p><strong>Determinant:</strong> ${det.toFixed(4)}</p>
                    </div>
                    
                    <div class="result-card">
                        <h3 class="result-title"><i class="fas fa-lambda"></i> Eigenvalues</h3>
                `;
                
                eigVals.forEach((val, i) => {
                    let valStr;
                    if (typeof val === 'number') {
                        valStr = val.toFixed(4);
                    } else if (val.re !== undefined && val.im !== undefined) {
                        valStr = `${val.re.toFixed(4)} ${val.im >= 0 ? '+' : ''}${val.im.toFixed(4)}i`;
                    } else {
                        valStr = val.toString();
                    }
                    
                    resultsHTML += `
                        <div class="eigen-pair">
                            <p><strong>λ${i+1}:</strong> ${valStr}</p>
                        </div>
                    `;
                });
                
                resultsHTML += `</div>`;
                
                // Add eigenvectors if available
                if (eigenvectors && eigenvectors._data) {
                    resultsHTML += `
                        <div class="result-card">
                            <h3 class="result-title"><i class="fas fa-arrow-right"></i> Eigenvectors</h3>
                    `;
                    
                    const vecData = eigenvectors._data;
                    for (let i = 0; i < vecData.length; i++) {
                        resultsHTML += `
                            <div class="eigen-pair">
                                <p><strong>v${i+1}:</strong> [${vecData[i].map(v => v.toFixed(4)).join(', ')}]ᵀ</p>
                            </div>
                        `;
                    }
                    
                    resultsHTML += `</div>`;
                }
                
                resultsContainer.innerHTML = resultsHTML;
                resultsContainer.style.display = 'grid';
                
                // Add animation to results
                setTimeout(() => {
                    document.querySelectorAll('.result-card').forEach((card, i) => {
                        card.style.animationDelay = `${i * 0.2}s`;
                        card.classList.add('fadeIn');
                    });
                }, 100);
            }
            
            function updateVisualization(matrix, eigenvalues, eigenvectors) {
                const plotArea = document.getElementById('plotArea');
                const is2x2 = matrix.length === 2;
                
                if (is2x2) {
                    // Create 2D visualization
                    const trace = [];
                    
                    // Get eigenvectors (simplified for visualization)
                    let eigVecs = [];
                    if (eigenvectors && eigenvectors._data) {
                        eigVecs = eigenvectors._data;
                    } else {
                        // Default vectors for visualization
                        eigVecs = [[1, 0], [0, 1]];
                    }
                    
                    // Get eigenvalues
                    let eigVals = [];
                    if (Array.isArray(eigenvalues)) {
                        eigVals = eigenvalues;
                    } else {
                        eigVals = [1, 1];
                    }
                    
                    // Plot eigenvectors and transformed vectors
                    for (let i = 0; i < 2; i++) {
                        const vec = eigVecs[i] || [Math.cos(i * Math.PI/4), Math.sin(i * Math.PI/4)];
                        
                        // Original eigenvector
                        trace.push({
                            x: [0, vec[0]],
                            y: [0, vec[1]],
                            mode: 'lines+markers',
                            line: { width: 6, color: '#1a237e' },
                            marker: { size: 12, color: '#1a237e' },
                            name: `v${i+1} (eigenvector)`
                        });
                        
                        // Transformed vector
                        const transformed = [
                            matrix[0][0]*vec[0] + matrix[0][1]*vec[1],
                            matrix[1][0]*vec[0] + matrix[1][1]*vec[1]
                        ];
                        
                        trace.push({
                            x: [0, transformed[0]],
                            y: [0, transformed[1]],
                            mode: 'lines+markers',
                            line: { width: 4, color: '#f50057', dash: 'dash' },
                            marker: { size: 10, color: '#f50057' },
                            name: `A·v${i+1} (transformed)`
                        });
                    }
                    
                    // Unit circle for reference
                    const theta = Array.from({length: 100}, (_, i) => i * 2 * Math.PI / 99);
                    const circleX = theta.map(t => Math.cos(t));
                    const circleY = theta.map(t => Math.sin(t));
                    
                    trace.push({
                        x: circleX,
                        y: circleY,
                        mode: 'lines',
                        line: { width: 1, color: 'gray', dash: 'dot' },
                        name: 'Unit Circle',
                        showlegend: false
                    });
                    
                    const layout = {
                        title: 'Eigenvector Transformation',
                        xaxis: { 
                            title: 'x-axis', 
                            range: [-3, 3],
                            zeroline: true,
                            gridcolor: '#eee',
                            showgrid: true
                        },
                        yaxis: { 
                            title: 'y-axis', 
                            range: [-3, 3],
                            scaleanchor: 'x',
                            gridcolor: '#eee',
                            showgrid: true
                        },
                        showlegend: true,
                        legend: { x: 1, y: 1, bgcolor: 'rgba(255,255,255,0.8)' },
                        hovermode: 'closest',
                        width: plotArea.offsetWidth,
                        height: 400,
                        margin: { l: 60, r: 60, b: 60, t: 60, pad: 10 },
                        paper_bgcolor: 'white',
                        plot_bgcolor: 'white'
                    };
                    
                    Plotly.newPlot(plotArea, trace, layout);
                }
            }
            
            function loadRandomExample() {
                const examples2x2 = [
                    [[4, 1], [2, 3]],
                    [[2, 1], [1, 2]],
                    [[0, -1], [1, 0]],
                    [[3, 1], [0, 3]],
                    [[5, 2], [3, 4]],
                    [[1, 2], [2, 1]],
                    [[2, 0], [0, -1]],
                    [[0, 2], [-2, 0]],
                    [[1, 4], [3, 2]],
                    [[-1, 2], [2, 2]],
                    [[3, 0], [0, 3]],
                    [[1, 0], [0, 1]],
                    [[0, 0], [0, 0]],
                    [[1, 1], [0, 1]]
                ];
                
                const examples3x3 = [
                    [[2, 0, 0], [0, 3, 1], [0, 0, 3]],
                    [[1, 2, 3], [0, 4, 5], [0, 0, 6]],
                    [[4, 1, 0], [0, 4, 1], [0, 0, 4]],
                    [[2, -1, 0], [-1, 2, -1], [0, -1, 2]],
                    [[1, 0, 0], [0, 2, 0], [0, 0, 3]],
                    [[0, 1, 0], [0, 0, 1], [1, 0, 0]],
                    [[2, 1, 0], [1, 2, 1], [0, 1, 2]],
                    [[1, 1, 0], [0, 1, 1], [0, 0, 1]],
                    [[3, 2, 1], [0, 2, 1], [0, 0, 1]],
                    [[0, 0, 1], [1, 0, 0], [0, 1, 0]]
                ];
                
                const is2x2 = document.querySelector('#matrix2x2') !== null;
                let example;
                
                if (is2x2) {
                    example = examples2x2[Math.floor(Math.random() * examples2x2.length)];
                    document.getElementById('a11').value = example[0][0];
                    document.getElementById('a12').value = example[0][1];
                    document.getElementById('a21').value = example[1][0];
                    document.getElementById('a22').value = example[1][1];
                } else {
                    example = examples3x3[Math.floor(Math.random() * examples3x3.length)];
                    document.getElementById('b11').value = example[0][0];
                    document.getElementById('b12').value = example[0][1];
                    document.getElementById('b13').value = example[0][2];
                    document.getElementById('b21').value = example[1][0];
                    document.getElementById('b22').value = example[1][1];
                    document.getElementById('b23').value = example[1][2];
                    document.getElementById('b31').value = example[2][0];
                    document.getElementById('b32').value = example[2][1];
                    document.getElementById('b33').value = example[2][2];
                }
                
                // Add animation to example button
                const exampleBtn = document.getElementById('exampleBtn');
                exampleBtn.innerHTML = '<i class="fas fa-check"></i> Example Loaded!';
                setTimeout(() => {
                    exampleBtn.innerHTML = '<i class="fas fa-random"></i> Load Random Example';
                }, 1500);
                
                calculateEigenvalues();
            }
            
            function loadQuickExamples() {
                const examplesContainer = document.querySelector('.examples-gallery');
                
                const quickExamples = [
                    {
                        title: "Symmetric Matrix",
                        matrix: "[[2,1],[1,2]]",
                        desc: "Real eigenvalues: 3, 1"
                    },
                    {
                        title: "Rotation Matrix",
                        matrix: "[[0,-1],[1,0]]",
                        desc: "Complex eigenvalues: ±i"
                    },
                    {
                        title: "Defective Matrix",
                        matrix: "[[3,1],[0,3]]",
                        desc: "Repeated eigenvalue: 3"
                    },
                    {
                        title: "Triangular Matrix",
                        matrix: "[[1,2,3],[0,4,5],[0,0,6]]",
                        desc: "Eigenvalues: 1, 4, 6"
                    }
                ];
                
                let examplesHTML = '';
                quickExamples.forEach(example => {
                    examplesHTML += `
                        <div class="example-card" data-matrix='${example.matrix}'>
                            <div class="example-title">${example.title}</div>
                            <div class="example-matrix">${example.matrix}</div>
                            <div class="example-desc">${example.desc}</div>
                        </div>
                    `;
                });
                
                examplesContainer.innerHTML = examplesHTML;
                
                // Add click event to example cards
                document.querySelectorAll('.example-card').forEach(card => {
                    card.addEventListener('click', function() {
                        const matrixStr = this.getAttribute('data-matrix');
                        loadExampleMatrix(matrixStr);
                        
                        // Add click animation
                        this.style.transform = 'scale(0.95)';
                        this.style.boxShadow = '0 0 20px rgba(48, 63, 159, 0.5)';
                        setTimeout(() => {
                            this.style.transform = '';
                            this.style.boxShadow = '';
                        }, 300);
                    });
                });
            }
            
            function loadExampleMatrix(matrixStr) {
                try {
                    const matrix = JSON.parse(matrixStr);
                    const is2x2 = matrix.length === 2;
                    
                    if (is2x2) {
                        // Switch to 2x2 view if needed
                        const dim2Btn = document.querySelector('.dim-btn[data-dim="2"]');
                        dim2Btn.click();
                        
                        setTimeout(() => {
                            document.getElementById('a11').value = matrix[0][0];
                            document.getElementById('a12').value = matrix[0][1];
                            document.getElementById('a21').value = matrix[1][0];
                            document.getElementById('a22').value = matrix[1][1];
                            calculateEigenvalues();
                        }, 100);
                    } else {
                        // Switch to 3x3 view if needed
                        const dim3Btn = document.querySelector('.dim-btn[data-dim="3"]');
                        dim3Btn.click();
                        
                        setTimeout(() => {
                            document.getElementById('b11').value = matrix[0][0];
                            document.getElementById('b12').value = matrix[0][1];
                            document.getElementById('b13').value = matrix[0][2];
                            document.getElementById('b21').value = matrix[1][0];
                            document.getElementById('b22').value = matrix[1][1];
                            document.getElementById('b23').value = matrix[1][2];
                            document.getElementById('b31').value = matrix[2][0];
                            document.getElementById('b32').value = matrix[2][1];
                            document.getElementById('b33').value = matrix[2][2];
                            calculateEigenvalues();
                        }, 100);
                    }
                } catch (error) {
                    console.error('Error loading example matrix:', error);
                }
            }
            
            function resetSimulator() {
                const is2x2 = document.querySelector('#matrix2x2') !== null;
                
                if (is2x2) {
                    document.getElementById('a11').value = 4;
                    document.getElementById('a12').value = 1;
                    document.getElementById('a21').value = 2;
                    document.getElementById('a22').value = 3;
                } else {
                    document.getElementById('b11').value = 2;
                    document.getElementById('b12').value = 0;
                    document.getElementById('b13').value = 0;
                    document.getElementById('b21').value = 0;
                    document.getElementById('b22').value = 3;
                    document.getElementById('b23').value = 1;
                    document.getElementById('b31').value = 0;
                    document.getElementById('b32').value = 0;
                    document.getElementById('b33').value = 3;
                }
                
                // Add animation to reset button
                const resetBtn = document.getElementById('resetBtn');
                resetBtn.innerHTML = '<i class="fas fa-check"></i> Reset Complete!';
                resetBtn.style.background = 'var(--success)';
                setTimeout(() => {
                    resetBtn.innerHTML = '<i class="fas fa-redo"></i> Reset';
                    resetBtn.style.background = '';
                }, 1500);
                
                calculateEigenvalues();
            }
            
            function animateTransformation() {
                const plotArea = document.getElementById('plotArea');
                const plotData = Plotly.d3.select('#plotArea').node()._fullData;
                
                if (!plotData || plotData.length === 0) return;
                
                // Create animation frames
                const frames = [];
                const nFrames = 30;
                
                for (let i = 0; i <= nFrames; i++) {
                    const frame = {
                        name: `frame${i}`,
                        data: []
                    };
                    
                    // For each eigenvector, create interpolated transformation
                    for (let j = 0; j < 2; j++) {
                        const eigIndex = j * 2; // Every 2 traces: eigenvector and transformed
                        
                        if (plotData[eigIndex]) {
                            const origX = plotData[eigIndex].x[1];
                            const origY = plotData[eigIndex].y[1];
                            
                            // Calculate transformed position
                            const transformedX = plotData[eigIndex+1].x[1];
                            const transformedY = plotData[eigIndex+1].y[1];
                            
                            // Interpolate between original and transformed
                            const factor = i / nFrames;
                            const interpX = origX + factor * (transformedX - origX);
                            const interpY = origY + factor * (transformedY - origY);
                            
                            frame.data.push({
                                x: [0, interpX],
                                y: [0, interpY],
                                mode: 'lines+markers',
                                line: { width: 6, color: plotData[eigIndex].line.color },
                                marker: { size: 12, color: plotData[eigIndex].line.color }
                            });
                        }
                    }
                    
                    // Keep unit circle unchanged
                    frame.data.push(plotData[4]);
                    
                    frames.push(frame);
                }
                
                // Animate
                Plotly.animate(plotArea, frames, {
                    frame: { duration: 50, redraw: true },
                    transition: { duration: 50, easing: 'linear' },
                    mode: 'immediate'
                });
                
                // Add animation to button
                const animateBtn = document.getElementById('animateBtn');
                animateBtn.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> Animating...';
                setTimeout(() => {
                    animateBtn.innerHTML = '<i class="fas fa-play"></i> Animate Transformation';
                }, nFrames * 50 + 500);
            }
            
            function exportVisualization() {
                const plotArea = document.getElementById('plotArea');
                
                // Create download link for image
                Plotly.toImage(plotArea, {
                    format: 'png',
                    width: 800,
                    height: 600
                }).then(function(dataUrl) {
                    const link = document.createElement('a');
                    link.download = 'eigenvector-visualization.png';
                    link.href = dataUrl;
                    link.click();
                });
                
                // Add animation to export button
                const exportBtn = document.getElementById('exportBtn');
                exportBtn.innerHTML = '<i class="fas fa-check"></i> Exported!';
                exportBtn.style.background = 'var(--success)';
                setTimeout(() => {
                    exportBtn.innerHTML = '<i class="fas fa-download"></i> Export Visualization';
                    exportBtn.style.background = '';
                }, 1500);
            }
            
            // ========== ADVANCED VISUALIZATION ==========
            function initializeAdvancedVisualization() {
                const advancedPlot = document.getElementById('advancedPlot');
                
                // Create 3D visualization of eigenvalue distribution
                const realParts = [-2, -1, 0, 1, 2];
                const imagParts = [-1, 0, 1, 0, -1];
                const magnitudes = [2, 1, 0.5, 1, 2];
                
                const trace1 = {
                    x: realParts,
                    y: imagParts,
                    z: magnitudes,
                    mode: 'markers+lines',
                    type: 'scatter3d',
                    marker: {
                        size: 12,
                        color: magnitudes,
                        colorscale: 'Viridis',
                        showscale: true
                    },
                    line: {
                        color: '#1a237e',
                        width: 4
                    },
                    name: 'Eigenvalue Distribution'
                };
                
                // Add unit sphere for reference
                const u = Array.from({length: 20}, (_, i) => i * Math.PI / 10);
                const v = Array.from({length: 20}, (_, i) => i * 2 * Math.PI / 20);
                
                let sphereX = [];
                let sphereY = [];
                let sphereZ = [];
                
                for (let i = 0; i < u.length; i++) {
                    for (let j = 0; j < v.length; j++) {
                        sphereX.push(Math.sin(u[i]) * Math.cos(v[j]));
                        sphereY.push(Math.sin(u[i]) * Math.sin(v[j]));
                        sphereZ.push(Math.cos(u[i]));
                    }
                }
                
                const trace2 = {
                    x: sphereX,
                    y: sphereY,
                    z: sphereZ,
                    mode: 'markers',
                    type: 'scatter3d',
                    marker: {
                        size: 2,
                        color: 'rgba(200, 200, 200, 0.1)',
                        opacity: 0.3
                    },
                    name: 'Unit Sphere',
                    showlegend: false
                };
                
                const data = [trace1, trace2];
                const layout = {
                    title: '3D Eigenvalue Visualization',
                    scene: {
                        xaxis: { title: 'Real Part', range: [-3, 3] },
                        yaxis: { title: 'Imaginary Part', range: [-3, 3] },
                        zaxis: { title: 'Magnitude', range: [0, 3] },
                        camera: {
                            eye: { x: 1.5, y: 1.5, z: 1.5 }
                        }
                    },
                    width: advancedPlot.offsetWidth,
                    height: 550,
                    margin: { l: 0, r: 0, b: 0, t: 50, pad: 0 },
                    paper_bgcolor: 'white'
                };
                
                Plotly.newPlot(advancedPlot, data, layout);
                
                // Add event listeners to visualization buttons
                document.getElementById('plot2DBtn').addEventListener('click', function() {
                    document.querySelector('.nav-tab[data-target="simulator"]').click();
                });
                
                document.getElementById('plot3DBtn').addEventListener('click', function() {
                    // Update 3D plot with current matrix eigenvalues
                    update3DVisualization();
                });
                
                document.getElementById('plotComplexBtn').addEventListener('click', function() {
                    // Load example with complex eigenvalues
                    loadExampleMatrix("[[0,-1],[1,0]]");
                    document.querySelector('.nav-tab[data-target="simulator"]').click();
                });
            }
            
            function update3DVisualization() {
                // This would update the 3D visualization with current eigenvalues
                // For now, we'll just show a message
                alert("3D visualization would show the distribution of eigenvalues in complex space. This feature uses the current matrix eigenvalues.");
            }
            
            // ========== POST-TEST SYSTEM ==========
            function loadPostTest() {
                const testContainer = document.querySelector('#posttest .test-container');
                
                const postTestQuestions = [
                    {
                        id: 1,
                        question: "Find the eigenvalues of matrix A = [[4, 1], [2, 3]]",
                        options: ["1 and 6", "2 and 4", "5 and 2", "3 and 4"],
                        correct: 2,
                        hint: "Solve det(A - λI) = 0. For 2×2 matrix: λ² - (trace)λ + (det) = 0.",
                        solution: "Characteristic equation: λ² - 7λ + 10 = 0 → (λ-5)(λ-2)=0 → λ=5,2."
                    },
                    {
                        id: 2,
                        question: "For a 3×3 matrix with trace = 12, determinant = 30, and eigenvalues 2 and 3, what is the third eigenvalue?",
                        options: ["4", "5", "7", "6"],
                        correct: 2,
                        hint: "Sum of eigenvalues = trace. If λ₁=2, λ₂=3, then λ₃ = trace - (2+3).",
                        solution: "λ₃ = 12 - (2+3) = 7. Also verify: product = 2×3×7 = 42 ≠ 30? Wait, check: 2×3×7=42, but det=30. There's inconsistency - product should equal determinant."
                    },
                    {
                        id: 3,
                        question: "What is the characteristic equation for matrix C = [[1, 2], [0, 4]]?",
                        options: ["λ² - 3λ + 2 = 0", "λ² - 5λ + 4 = 0", "λ² - 5λ + 4 = 0", "λ² - 4λ + 4 = 0"],
                        correct: 1,
                        hint: "For triangular matrix, eigenvalues are diagonal elements.",
                        solution: "Matrix is triangular, so eigenvalues are 1 and 4. Characteristic equation: (λ-1)(λ-4)=λ²-5λ+4=0."
                    },
                    {
                        id: 4,
                        question: "What is an eigenvalue of the identity matrix I₃?",
                        options: ["1 (with multiplicity 3)", "0", "3", "All real numbers"],
                        correct: 0,
                        hint: "I·v = v for all vectors v.",
                        solution: "Identity matrix preserves all vectors, so Av = 1·v for any v. Thus eigenvalue is 1 with multiplicity 3."
                    },
                    {
                        id: 5,
                        question: "If λ = 3 is an eigenvalue of A, what is an eigenvalue of A²?",
                        options: ["9", "3", "6", "1/3"],
                        correct: 0,
                        hint: "If Av = λv, then A²v = A(Av) = A(λv) = λ(Av) = λ²v.",
                        solution: "A²v = A(Av) = A(λv) = λ(Av) = λ(λv) = λ²v = 9v. So eigenvalue is 9."
                    },
                    {
                        id: 6,
                        question: "Which of the following is an eigenvalue of the singular matrix E = [[1, 2], [2, 4]]?",
                        options: ["0", "1", "2", "5"],
                        correct: 0,
                        hint: "Singular matrix has determinant 0, so at least one eigenvalue is 0.",
                        solution: "Singular matrix has determinant 0, so product of eigenvalues = 0, thus at least one eigenvalue is 0."
                    },
                    {
                        id: 7,
                        question: "Determine the eigenvalues of F = [[1, 6], [5, 2]]",
                        options: ["7 and -4", "3 and 4", "1 and 2", "5 and -2"],
                        correct: 0,
                        hint: "Calculate trace = 3, determinant = 2-30 = -28. Solve λ² - 3λ - 28 = 0.",
                        solution: "λ² - 3λ - 28 = 0 → (λ-7)(λ+4)=0 → λ=7, -4."
                    },
                    {
                        id: 8,
                        question: "If a 4×4 matrix has eigenvalues 1, 2, 3, and 4, what is the determinant of the matrix?",
                        options: ["10", "24", "12", "0"],
                        correct: 1,
                        hint: "Determinant = product of eigenvalues.",
                        solution: "det = 1×2×3×4 = 24."
                    },
                    {
                        id: 9,
                        question: "Find the trace of the matrix whose eigenvalues are -1, 0, and 5",
                        options: ["4", "5", "6", "-1"],
                        correct: 0,
                        hint: "Trace = sum of eigenvalues.",
                        solution: "trace = -1 + 0 + 5 = 4."
                    },
                    {
                        id: 10,
                        question: "Given G = [[3, -2], [4, -1]], what are the eigenvalues?",
                        options: ["1 and 1", "1 and 3", "1±2i", "2 and 4"],
                        correct: 2,
                        hint: "Calculate trace = 2, determinant = -3+8 = 5. Solve λ² - 2λ + 5 = 0.",
                        solution: "λ² - 2λ + 5 = 0 → discriminant = 4-20 = -16 → λ = 1±2i."
                    }
                ];
                
                let testHTML = '';
                postTestQuestions.forEach(q => {
                    testHTML += `
                        <div class="test-question" id="pq${q.id}">
                            <div class="question-text">${q.id}. ${q.question}</div>
                            <div class="options-container" id="poptions-${q.id}">
                    `;
                    
                    q.options.forEach((option, idx) => {
                        testHTML += `
                            <div class="option" data-question="${q.id}" data-option="${idx}">
                                <input type="radio" name="pq${q.id}" id="pq${q.id}opt${idx}">
                                <label for="pq${q.id}opt${idx}">${option}</label>
                            </div>
                        `;
                    });
                    
                    testHTML += `
                            </div>
                            <button class="test-button hint-button" data-question="${q.id}">
                                <i class="fas fa-lightbulb"></i> Show Hint
                            </button>
                            <button class="test-button solution-button" data-question="${q.id}">
                                <i class="fas fa-check-circle"></i> Show Solution
                            </button>
                            <div class="hint-box" id="phint-${q.id}">
                                <strong>Hint:</strong> ${q.hint}
                            </div>
                            <div class="solution-box" id="psolution-${q.id}">
                                <strong>Solution:</strong> ${q.solution}
                            </div>
                        </div>
                    `;
                });
                
                testContainer.innerHTML = testHTML;
                
                // Add event listeners
                document.querySelectorAll('#posttest .option').forEach(option => {
                    option.addEventListener('click', function() {
                        const questionId = this.getAttribute('data-question');
                        const options = document.querySelectorAll(`#poptions-${questionId} .option`);
                        options.forEach(opt => {
                            opt.classList.remove('selected');
                            opt.querySelector('input[type="radio"]').checked = false;
                        });
                        this.classList.add('selected');
                        this.querySelector('input[type="radio"]').checked = true;
                    });
                });
                
                document.querySelectorAll('#posttest .hint-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const questionId = this.getAttribute('data-question');
                        const hintBox = document.getElementById(`phint-${questionId}`);
                        hintBox.style.display = hintBox.style.display === 'block' ? 'none' : 'block';
                    });
                });
                
                document.querySelectorAll('#posttest .solution-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const questionId = this.getAttribute('data-question');
                        const solutionBox = document.getElementById(`psolution-${questionId}`);
                        solutionBox.style.display = solutionBox.style.display === 'block' ? 'none' : 'block';
                    });
                });
                
                // Submit post-test button
                document.getElementById('submit-posttest').addEventListener('click', submitPostTest);
                
                // Retry post-test button
                document.getElementById('retry-posttest')?.addEventListener('click', function() {
                    loadPostTest();
                    document.getElementById('posttest-results').style.display = 'none';
                    document.getElementById('submit-posttest').style.display = 'block';
                });
                
                // Proceed to examples button
                document.getElementById('proceed-examples')?.addEventListener('click', function() {
                    document.querySelector('.nav-tab[data-target="examples"]').click();
                });
            }
            
            function submitPostTest() {
                let score = 0;
                const questions = [
                    {id: 1, correct: 2},
                    {id: 2, correct: 2},
                    {id: 3, correct: 1},
                    {id: 4, correct: 0},
                    {id: 5, correct: 0},
                    {id: 6, correct: 0},
                    {id: 7, correct: 0},
                    {id: 8, correct: 1},
                    {id: 9, correct: 0},
                    {id: 10, correct: 2}
                ];
                
                questions.forEach(q => {
                    const selectedOption = document.querySelector(`#poptions-${q.id} .option.selected`);
                    if (selectedOption) {
                        const selectedIndex = parseInt(selectedOption.getAttribute('data-option'));
                        const isCorrect = selectedIndex === q.correct;
                        
                        // Highlight correct/incorrect answers
                        document.querySelectorAll(`#poptions-${q.id} .option`).forEach((opt, idx) => {
                            if (idx === q.correct) {
                                opt.classList.add('correct');
                            } else if (opt.classList.contains('selected') && idx !== q.correct) {
                                opt.classList.add('incorrect');
                            }
                        });
                        
                        if (isCorrect) score++;
                    }
                });
                
                postTestScore = score;
                
                // Display results
                const resultsDiv = document.getElementById('posttest-results');
                const scoreDiv = document.getElementById('posttest-score');
                const feedbackDiv = document.getElementById('posttest-feedback');
                
                scoreDiv.textContent = `${score}/10`;
                
                if (score >= 9) {
                    feedbackDiv.textContent = "Excellent! You have mastered eigenvalues and eigenvectors!";
                    feedbackDiv.style.color = "var(--success)";
                } else if (score >= 7) {
                    feedbackDiv.textContent = "Very good! You have a strong understanding of the concepts.";
                    feedbackDiv.style.color = "var(--success)";
                } else if (score >= 5) {
                    feedbackDiv.textContent = "Good work! Review the challenging questions and try again.";
                    feedbackDiv.style.color = "var(--warning)";
                } else {
                    feedbackDiv.textContent = "You may need to review the theory and examples before proceeding.";
                    feedbackDiv.style.color = "var(--accent)";
                }
                
                resultsDiv.style.display = 'block';
                document.getElementById('submit-posttest').style.display = 'none';
            }
            
            // ========== EXAMPLES GALLERY ==========
            function loadExamples() {
                const examplesContainer = document.querySelector('#examples .examples-gallery');
                
                const allExamples = [
                    {
                        title: "Identity Matrix",
                        matrix: "[[1,0],[0,1]]",
                        desc: "Eigenvalues: 1, 1 (multiplicity 2)",
                        type: "diagonal"
                    },
                    {
                        title: "Zero Matrix",
                        matrix: "[[0,0],[0,0]]",
                        desc: "Eigenvalue: 0 (multiplicity 2)",
                        type: "singular"
                    },
                    {
                        title: "Shear Matrix",
                        matrix: "[[1,1],[0,1]]",
                        desc: "Eigenvalue: 1 (defective)",
                        type: "defective"
                    },
                    {
                        title: "Reflection Matrix",
                        matrix: "[[0,1],[1,0]]",
                        desc: "Eigenvalues: 1, -1",
                        type: "symmetric"
                    },
                    {
                        title: "Projection Matrix",
                        matrix: "[[1,0],[0,0]]",
                        desc: "Eigenvalues: 1, 0",
                        type: "projection"
                    },
                    {
                        title: "Rotation 45°",
                        matrix: "[[0.707,-0.707],[0.707,0.707]]",
                        desc: "Complex eigenvalues",
                        type: "rotation"
                    },
                    {
                        title: "Diagonal Matrix",
                        matrix: "[[2,0],[0,5]]",
                        desc: "Eigenvalues: 2, 5",
                        type: "diagonal"
                    },
                    {
                        title: "Singular Matrix",
                        matrix: "[[2,4],[1,2]]",
                        desc: "One eigenvalue is 0",
                        type: "singular"
                    }
                ];
                
                let examplesHTML = '';
                allExamples.forEach(example => {
                    examplesHTML += `
                        <div class="example-card" data-matrix='${example.matrix}'>
                            <div class="example-title">${example.title}</div>
                            <div class="example-matrix">${example.matrix}</div>
                            <div class="example-desc">${example.desc}</div>
                            <div style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                                Type: ${example.type}
                            </div>
                        </div>
                    `;
                });
                
                examplesContainer.innerHTML = examplesHTML;
                
                // Add event listeners to example cards
                document.querySelectorAll('#examples .example-card').forEach(card => {
                    card.addEventListener('click', function() {
                        const matrixStr = this.getAttribute('data-matrix');
                        loadExampleMatrix(matrixStr);
                        
                        // Switch to simulator tab
                        document.querySelector('.nav-tab[data-target="simulator"]').click();
                        
                        // Add click animation
                        this.style.animation = 'buttonGlow 0.5s';
                        setTimeout(() => {
                            this.style.animation = '';
                        }, 500);
                    });
                });
                
                // Load more examples button
                document.getElementById('loadMoreExamples').addEventListener('click', function() {
                    // In a real app, this would load more examples
                    alert("More examples would be loaded from a database. This demonstrates the functionality.");
                    
                    // Add animation to button
                    this.innerHTML = '<i class="fas fa-check"></i> Examples Loaded!';
                    this.style.background = 'var(--success)';
                    setTimeout(() => {
                        this.innerHTML = '<i class="fas fa-plus-circle"></i> Load More Examples';
                        this.style.background = '';
                    }, 1500);
                });
            }
            
            // ========== PRACTICE QUIZ ==========
            function loadQuiz() {
                const testContainer = document.querySelector('#quiz .test-container');
                
                const quizQuestions = [
                    {
                        id: 1,
                        question: "What are the eigenvalues of A = [[5, 2], [3, 4]]?",
                        options: ["2 and 7", "1 and 8", "3 and 6", "4 and 5"],
                        correct: 0,
                        hint: "Trace = 9, determinant = 20-6=14. Solve λ² - 9λ + 14 = 0.",
                        solution: "λ² - 9λ + 14 = 0 → (λ-2)(λ-7)=0 → λ=2,7."
                    },
                    {
                        id: 2,
                        question: "If a matrix has determinant 0, what can you say about its eigenvalues?",
                        options: ["All eigenvalues are 0", "At least one eigenvalue is 0", "All eigenvalues are positive", "No eigenvalues exist"],
                        correct: 1,
                        hint: "Determinant = product of eigenvalues.",
                        solution: "If determinant = 0, then product of eigenvalues = 0, so at least one eigenvalue must be 0."
                    },
                    {
                        id: 3,
                        question: "For a symmetric matrix, eigenvectors corresponding to distinct eigenvalues are:",
                        options: ["Parallel", "Orthogonal", "Equal", "Opposite"],
                        correct: 1,
                        hint: "Spectral theorem for symmetric matrices.",
                        solution: "For a symmetric matrix, eigenvectors corresponding to distinct eigenvalues are orthogonal."
                    },
                    {
                        id: 4,
                        question: "What is the sum of eigenvalues of [[1, 2], [3, 4]]?",
                        options: ["5", "6", "7", "8"],
                        correct: 0,
                        hint: "Sum of eigenvalues = trace of matrix.",
                        solution: "Trace = 1+4 = 5, so sum of eigenvalues = 5."
                    },
                    {
                        id: 5,
                        question: "If A is invertible and λ is an eigenvalue of A, what is an eigenvalue of A⁻¹?",
                        options: ["λ", "1/λ", "λ²", "-λ"],
                        correct: 1,
                        hint: "If Av = λv, then A⁻¹v = (1/λ)v.",
                        solution: "A⁻¹v = (1/λ)v, so eigenvalue of A⁻¹ is 1/λ."
                    },
                    {
                        id: 6,
                        question: "Which matrix has only one distinct eigenvalue?",
                        options: ["[[2,0],[0,3]]", "[[2,1],[0,2]]", "[[1,0],[0,1]]", "[[0,1],[1,0]]"],
                        correct: 1,
                        hint: "A matrix with repeated eigenvalues but not enough eigenvectors.",
                        solution: "[[2,1],[0,2]] has eigenvalue 2 with multiplicity 2 but only one eigenvector."
                    },
                    {
                        id: 7,
                        question: "What are the eigenvalues of a projection matrix?",
                        options: ["0 and 1 only", "Any real numbers", "Only 1", "Only 0"],
                        correct: 0,
                        hint: "Projection matrix satisfies P² = P.",
                        solution: "For projection matrix, P² = P, so λ² = λ → λ(λ-1)=0 → λ=0 or 1."
                    },
                    {
                        id: 8,
                        question: "If all eigenvalues of a matrix are positive, the matrix is:",
                        options: ["Positive definite", "Singular", "Orthogonal", "Symmetric"],
                        correct: 0,
                        hint: "Definition of positive definite matrix.",
                        solution: "A matrix is positive definite if all its eigenvalues are positive."
                    },
                    {
                        id: 9,
                        question: "What is the characteristic polynomial of [[a, b], [c, d]]?",
                        options: ["λ² - (a+d)λ + (ad-bc)", "λ² - (a+b)λ + (ad-bc)", "λ² - (a+d)λ + (a+b+c+d)", "λ² - (a+d)λ + (ac-bd)"],
                        correct: 0,
                        hint: "det(A-λI) = (a-λ)(d-λ) - bc.",
                        solution: "det([[a-λ, b],[c, d-λ]]) = (a-λ)(d-λ) - bc = λ² - (a+d)λ + (ad-bc)."
                    },
                    {
                        id: 10,
                        question: "If a 3×3 matrix has eigenvalues 1, 2, 3, what is its determinant?",
                        options: ["6", "5", "7", "8"],
                        correct: 0,
                        hint: "Determinant = product of eigenvalues.",
                        solution: "det = 1×2×3 = 6."
                    }
                ];
                
                let quizHTML = '';
                quizQuestions.forEach(q => {
                    quizHTML += `
                        <div class="test-question" id="quiz${q.id}">
                            <div class="question-text">${q.id}. ${q.question}</div>
                            <div class="options-container" id="quizoptions-${q.id}">
                    `;
                    
                    q.options.forEach((option, idx) => {
                        quizHTML += `
                            <div class="option" data-question="${q.id}" data-option="${idx}">
                                <input type="radio" name="quiz${q.id}" id="quiz${q.id}opt${idx}">
                                <label for="quiz${q.id}opt${idx}">${option}</label>
                            </div>
                        `;
                    });
                    
                    quizHTML += `
                            </div>
                            <button class="test-button hint-button" data-question="${q.id}">
                                <i class="fas fa-lightbulb"></i> Show Hint
                            </button>
                            <button class="test-button solution-button" data-question="${q.id}">
                                <i class="fas fa-check-circle"></i> Show Solution
                            </button>
                            <div class="hint-box" id="quizhint-${q.id}">
                                <strong>Hint:</strong> ${q.hint}
                            </div>
                            <div class="solution-box" id="quizsolution-${q.id}">
                                <strong>Solution:</strong> ${q.solution}
                            </div>
                        </div>
                    `;
                });
                
                testContainer.innerHTML = quizHTML;
                
                // Add event listeners
                document.querySelectorAll('#quiz .option').forEach(option => {
                    option.addEventListener('click', function() {
                        const questionId = this.getAttribute('data-question');
                        const options = document.querySelectorAll(`#quizoptions-${questionId} .option`);
                        options.forEach(opt => {
                            opt.classList.remove('selected');
                            opt.querySelector('input[type="radio"]').checked = false;
                        });
                        this.classList.add('selected');
                        this.querySelector('input[type="radio"]').checked = true;
                    });
                });
                
                document.querySelectorAll('#quiz .hint-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const questionId = this.getAttribute('data-question');
                        const hintBox = document.getElementById(`quizhint-${questionId}`);
                        hintBox.style.display = hintBox.style.display === 'block' ? 'none' : 'block';
                    });
                });
                
                document.querySelectorAll('#quiz .solution-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const questionId = this.getAttribute('data-question');
                        const solutionBox = document.getElementById(`quizsolution-${questionId}`);
                        solutionBox.style.display = solutionBox.style.display === 'block' ? 'none' : 'block';
                    });
                });
                
                // Submit quiz button
                document.getElementById('submit-quiz').addEventListener('click', submitQuiz);
                
                // Retry quiz button
                document.getElementById('retry-quiz')?.addEventListener('click', function() {
                    loadQuiz();
                    document.getElementById('quiz-results').style.display = 'none';
                    document.getElementById('submit-quiz').style.display = 'block';
                });
            }
            
            function submitQuiz() {
                let score = 0;
                const questions = [
                    {id: 1, correct: 0},
                    {id: 2, correct: 1},
                    {id: 3, correct: 1},
                    {id: 4, correct: 0},
                    {id: 5, correct: 1},
                    {id: 6, correct: 1},
                    {id: 7, correct: 0},
                    {id: 8, correct: 0},
                    {id: 9, correct: 0},
                    {id: 10, correct: 0}
                ];
                
                questions.forEach(q => {
                    const selectedOption = document.querySelector(`#quizoptions-${q.id} .option.selected`);
                    if (selectedOption) {
                        const selectedIndex = parseInt(selectedOption.getAttribute('data-option'));
                        const isCorrect = selectedIndex === q.correct;
                        
                        // Highlight correct/incorrect answers
                        document.querySelectorAll(`#quizoptions-${q.id} .option`).forEach((opt, idx) => {
                            if (idx === q.correct) {
                                opt.classList.add('correct');
                            } else if (opt.classList.contains('selected') && idx !== q.correct) {
                                opt.classList.add('incorrect');
                            }
                        });
                        
                        if (isCorrect) score++;
                    }
                });
                
                quizScore = score;
                
                // Display results
                const resultsDiv = document.getElementById('quiz-results');
                const scoreDiv = document.getElementById('quiz-score');
                const feedbackDiv = document.getElementById('quiz-feedback');
                
                scoreDiv.textContent = `${score}/10`;
                
                if (score >= 9) {
                    feedbackDiv.textContent = "Perfect score! You're an eigenvalues expert!";
                    feedbackDiv.style.color = "var(--success)";
                } else if (score >= 7) {
                    feedbackDiv.textContent = "Great job! You have a solid understanding.";
                    feedbackDiv.style.color = "var(--success)";
                } else if (score >= 5) {
                    feedbackDiv.textContent = "Good effort! Review the incorrect answers.";
                    feedbackDiv.style.color = "var(--warning)";
                } else {
                    feedbackDiv.textContent = "Keep practicing! Review the theory and examples.";
                    feedbackDiv.style.color = "var(--accent)";
                }
                
                resultsDiv.style.display = 'block';
                document.getElementById('submit-quiz').style.display = 'none';
            }
            
            // ========== FEEDBACK SYSTEM ==========
            function initializeFeedback() {
                // Star rating system
                const stars = document.querySelectorAll('#starRating i');
                const ratingValue = document.getElementById('ratingValue');
                
                stars.forEach(star => {
                    star.addEventListener('click', function() {
                        const rating = this.getAttribute('data-rating');
                        ratingValue.value = rating;
                        
                        stars.forEach(s => {
                            s.classList.remove('active');
                            if (s.getAttribute('data-rating') <= rating) {
                                s.classList.add('active');
                            }
                        });
                        
                        // Add animation to selected stars
                        this.style.transform = 'scale(1.3)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 300);
                    });
                    
                    star.addEventListener('mouseover', function() {
                        const rating = this.getAttribute('data-rating');
                        stars.forEach(s => {
                            if (s.getAttribute('data-rating') <= rating) {
                                s.style.color = '#FFD700';
                            } else {
                                s.style.color = '#ddd';
                            }
                        });
                    });
                    
                    star.addEventListener('mouseout', function() {
                        const currentRating = ratingValue.value;
                        stars.forEach(s => {
                            if (s.getAttribute('data-rating') <= currentRating) {
                                s.style.color = '#FFD700';
                            } else {
                                s.style.color = '#ddd';
                            }
                        });
                    });
                });
                
                // Form submission
                document.getElementById('feedbackForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const name = document.getElementById('userName').value;
                    const email = document.getElementById('userEmail').value;
                    const role = document.getElementById('userRole').value;
                    const rating = ratingValue.value;
                    const feedback = document.getElementById('feedbackText').value;
                    
                    if (!name || !email || !feedback) {
                        document.getElementById('feedbackMessage').innerHTML = 
                            '<p style="color: var(--accent);">Please fill in all required fields.</p>';
                        return;
                    }
                    
                    if (rating === '0') {
                        document.getElementById('feedbackMessage').innerHTML = 
                            '<p style="color: var(--accent);">Please provide a rating.</p>';
                        return;
                    }
                    
                    // Create mailto link
                    const subject = `Virtual Lab Feedback - Rating: ${rating}/5`;
                    const body = `Name: ${name}%0D%0AEmail: ${email}%0D%0ARole: ${role}%0D%0ARating: ${rating}/5%0D%0A%0D%0AFeedback:%0D%0A${feedback}`;
                    
                    // Open mail client
                    window.open(`mailto:utkarsh.mutha25@pccoepune.org?subject=${encodeURIComponent(subject)}&body=${body}`);
                    
                    // Show confirmation message
                    document.getElementById('feedbackMessage').innerHTML = 
                        `<p style="color: var(--success); font-weight: bold;">
                        <i class="fas fa-check-circle"></i> Thank you for your feedback!<br>
                        A mail client should open with your feedback pre-filled.<br>
                        If not, please send your feedback to <strong>utkarsh.mutha25@pccoepune.org</strong>
                        </p>`;
                    
                    // Reset form
                    this.reset();
                    stars.forEach(s => {
                        s.classList.remove('active');
                        s.style.color = '#ddd';
                    });
                    ratingValue.value = '0';
                    
                    // Add success animation
                    const submitBtn = document.querySelector('.submit-btn');
                    submitBtn.innerHTML = '<i class="fas fa-check"></i> Feedback Sent!';
                    submitBtn.style.background = 'var(--success)';
                    setTimeout(() => {
                        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit Feedback';
                        submitBtn.style.background = '';
                    }, 2000);
                });
            }
            
            // ========== TEAM SECTION ==========
            function loadTeam() {
                const teamContainer = document.querySelector('.team-container');
                
                const teamMembers = [
                    {
                        name: "Neha Sharma",
                        role: "Project Guide & Mentor",
                        description: "Provided expert guidance, theoretical framework, and oversaw the pedagogical design of the virtual lab.",
                        icon: "fa-chalkboard-teacher",
                        isGuide: true
                    },
                    {
                        name: "Sureshkumar Choudhary",
                        role: "Frontend Developer & Simulation Design",
                        description: "Developed the interactive simulator, visualization tools, and user interface components.",
                        icon: "fa-code",
                        isGuide: false
                    },
                    {
                        name: "Utkarsh Mutha",
                        role: "Algorithm Design & Mathematical Core",
                        description: "Implemented the eigenvalue computation algorithms and mathematical verification systems.",
                        icon: "fa-calculator",
                        isGuide: false
                    },
                    {
                        name: "Ayush Pradhan",
                        role: "UI/UX Design & Content Creation",
                        description: "Designed the visual layout, animations, and created explanatory content with examples.",
                        icon: "fa-paint-brush",
                        isGuide: false
                    },
                    {
                        name: "Gajanan Patil",
                        role: "Backend Integration & Testing",
                        description: "Ensured system reliability, integrated mathematical libraries, and performed extensive testing.",
                        icon: "fa-server",
                        isGuide: false
                    },
                    {
                        name: "Amruta Biradar",
                        role: "Quality Assurance & Documentation",
                        description: "Verified all calculations, validated educational content, and prepared comprehensive documentation.",
                        icon: "fa-clipboard-check",
                        isGuide: false
                    }
                ];
                
                let teamHTML = '';
                teamMembers.forEach(member => {
                    teamHTML += `
                        <div class="team-card ${member.isGuide ? 'guide' : ''}">
                            <div class="team-icon">
                                <i class="fas ${member.icon}"></i>
                            </div>
                            <h3 class="team-name">${member.name}</h3>
                            <div class="team-role">${member.role}</div>
                            <p>${member.description}</p>
                        </div>
                    `;
                });
                
                teamContainer.innerHTML = teamHTML;
            }
            
            // ========== INITIALIZE THE APPLICATION ==========
            // Load initial sections
            loadPreTest();
            loadProcedure();
            loadTeam();
            
            // Initialize simulator when page loads (if simulator is active)
            if (document.querySelector('#simulator').classList.contains('active')) {
                initializeSimulator();
            }
            
            // Initialize feedback system
            initializeFeedback();
            
            // Add loading animation to all buttons
            document.querySelectorAll('button').forEach(button => {
                button.addEventListener('mousedown', function() {
                    this.style.transform = 'scale(0.98)';
                });
                
                button.addEventListener('mouseup', function() {
                    this.style.transform = '';
                });
                
                button.addEventListener('mouseleave', function() {
                    this.style.transform = '';
                });
            });
            
            // Handle window resize
            window.addEventListener('resize', function() {
                // Reinitialize visualizations if they're active
                if (document.querySelector('#simulator').classList.contains('active')) {
                    setTimeout(calculateEigenvalues, 300);
                }
                if (document.querySelector('#visualization').classList.contains('active')) {
                    setTimeout(initializeAdvancedVisualization, 300);
                }
            });
            
            // Show welcome message
            setTimeout(() => {
                if (document.querySelector('#aim').classList.contains('active')) {
                    alert("Welcome to the Eigenvalues & Eigenvectors Virtual Lab! Navigate through the sidebar to explore all features.");
                }
            }, 1000);
        });
    </script>
</body>
</html>
